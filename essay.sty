\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}

\usepackage{amssymb,amsfonts,amsmath,amsthm}
\usepackage{dsfont} % \mathds{R}

% packeges for table
\usepackage{makecell}
\usepackage{multirow}

\usepackage{ulem} % package for underlining

\usepackage{graphicx} % inserting images

% https://es.overleaf.com/learn/latex/Pgfplots_package
\usepackage{pgfplots}
\pgfplotsset{compat=1.9}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%             general page settings               %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[left=2.5cm,top=2cm,right=2cm,bottom=2cm]{geometry}
\usepackage{indentfirst}        % indentation for first paragraph
\setlength\parindent{1.25cm}     % paragraph indentation
% \linespread{1.3}                % 1.5 interval
\frenchspacing                  % pretty space length
\sloppy                         % pretty line breaking

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%            numbering on top of page             %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[R]{\thepage}
\fancyheadoffset{0mm}
\fancyfootoffset{0mm}
\setlength{\headheight}{17pt}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
% overriting plain style of chapter first page (plain -> numbered)
\fancypagestyle{plain}{
    \fancyhf{}
    \rhead{\thepage}}

\setcounter{page}{2} % numbering begin from second page

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%                   TOC styling                   %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{titletoc}

\contentsmargin{0cm}                         % removes the default margin

% chapter text styling
\titlecontents{chapter}[1.25cm]              % indentation
{\addvspace{10pt}\normalsize\normalfont\bfseries} % spacing and font options for chapters
{}  % chapter number
{}
{\normalsize\normalfont\bfseries\;\titlerule*[.5pc]{.}\;\thecontentspage} % page number

% section text styling
\titlecontents{section}[2.75cm]              % indentation
{\addvspace{10pt}\normalsize\normalfont}     % spacing and font options for sections
{\contentslabel[\thecontentslabel]{1.25cm}}  % section number
{}
{\normalfont\;\titlerule*[.5pc]{.}\;\thecontentspage} % page number
[]

% subsection text styling
\titlecontents{subsection}[3.5cm]            % indentation
{\addvspace{10pt}\normalsize\normalfont}     % spacing and font options for subsections
{\contentslabel[\thecontentslabel]{1.25cm}}  % section number
{}
{\normalfont\;\titlerule*[.5pc]{.}\;\thecontentspage} % page number
[]

% subsubsection text styling
\titlecontents{subsubsection}[4.25cm]            % indentation
{\addvspace{10pt}\normalsize\normalfont}     % spacing and font options for subsections
{\contentslabel[\thecontentslabel]{1.25cm}}  % section number
{}
{\normalfont\;\titlerule*[.5pc]{.}\;\thecontentspage} % page number
[]

\setcounter{tocdepth}{3}                     % depth of TOC tree
\addto\captionsrussian{\def\contentsname{СОДЕРЖАНИЕ}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%                 titles styling                  %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[compact]{titlesec}

% hyperref is loaded after titlesec, as actually recommended in hyperref's manual
\usepackage{hyperref}

% section number from 1.1 -> 1
\renewcommand{\thesection}{\arabic{section}}

% command for centering chapter heading (ОСНОВНАЯ ЧАСТЬ ...)
\newcommand*\CenterChapterHeading{%
% chapter title styling
% vertical space after numbered title
\titlespacing*{\chapter}{0pt}{11cm}{0pt}
% vertical space after unnumbered title
\titlespacing*{name=\chapter, numberless}{0pt}{11cm}{0pt}
\titleformat{\chapter}[display]
{}{}{0pt}
{
	\filcenter\Large\normalfont\bfseries
}[{
}]
}

\newcommand*\NonNumberedSection{%
\titleformat{\section}[display]
{
	\filcenter\normalsize\normalfont\bfseries
}{\pagebreak}{-22pt}{}
}

% chapter title styling
% vertical space after numbered title
\titlespacing*{\chapter}{0pt}{-40pt}{1cm}
% vertical space after unnumbered title
\titlespacing*{name=\chapter, numberless}{0pt}{-22pt}{1cm}
\titleformat{\chapter}[display]
{}{}{0pt}
{
	\filcenter\normalsize\normalfont\bfseries
}[{
% 	\vspace{3pt}
% 	\titlerule[1.5pt]
}]

% section title styling
\titlespacing*{\section}{0pt}{0pt}{22pt}
\titleformat{\section}[display]
{
	\filcenter\normalsize\normalfont\bfseries
}{\pagebreak}{-22pt}{\thesection.\;}

% subsection title styling
\titlespacing*{\subsection}{0pt}{0pt}{22pt}
\titleformat{\subsection}[display]
{
	\centering\sc\bfseries
}{}{12pt}{\thesubsection.\;}

% subsubsection title styling
\titlespacing*{\subsubsection}{0pt}{0pt}{22pt}
\titleformat{\subsubsection}[display]
{
	\centering\sc\bfseries
}{}{12pt}{\thesubsubsection.\;}

\setcounter{secnumdepth}{3} % depth of counter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%                  theorem style                  %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newtheoremstyle{TheoremStyle}
{}                % space above
{}                % space below
{%\slshape
}                 % theorem body font % (default is "\upshape")
{}                % indent amount
{\sc}             % theorem head font % (default is \mdseries)
{.}               % punctuation after theorem head % default: no punctuation
{ }               % space after theorem head
{}                % theorem head spec
\theoremstyle{TheoremStyle}

\newtheorem{proposition}{Предложение}
\newtheorem{definition}{Определение}
\newtheorem{theorem}{Теорема}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%             pic and table captions              %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[tableposition=top]{caption}
\usepackage{subcaption} % for more detailed captions
% \DeclareCaptionLabelFormat: #1 — standart lable text, #2  - number of pic/table
\DeclareCaptionLabelFormat{gostfigure}{Рис. #2}
\DeclareCaptionLabelFormat{gosttable}{Таблица #2}
\DeclareCaptionLabelSeparator{gost}{~---~}
\captionsetup{labelsep=gost}
\captionsetup[figure]{labelformat=gostfigure}
\captionsetup[table]{justification=raggedleft,singlelinecheck=off}
% cyrillic representation of subfigure captions: (а), (б), ...
\renewcommand{\thesubfigure}{\asbuk{subfigure}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%           itemize и enumerate styling           %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{enumitem}
\makeatletter
    \AddEnumerateCounter{\asbuk}{\@asbuk}{м)}
\makeatother
\setlist{nolistsep}
\renewcommand{\labelitemi}{-}
\renewcommand{\labelenumi}{\asbuk{enumi})}
\renewcommand{\labelenumii}{\arabic{enumii})}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%                      bibtex                     %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{csquotes}
\usepackage[backend=biber, style=gost-numeric, citestyle=numeric, sorting=ynt]{biblatex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%            counters for first page              %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{lastpage} % pages counter

% pics and tables counter
\newcounter{totfigures}
\newcounter{tottables}
\makeatletter
    \AtEndDocument{%
      \addtocounter{totfigures}{\value{figure}}%
      \addtocounter{tottables}{\value{table}}%
      \immediate\write\@mainaux{%
        \string\gdef\string\totfig{\number\value{totfigures}}%
        \string\gdef\string\tottab{\number\value{tottables}}%
      }%
    }
\makeatother

% пока не знаю как добавить счетчик по источникам
