\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}

\usepackage{amssymb,amsfonts,amsmath,amsthm}
\usepackage{hyperref}

% packeges for table
\usepackage{makecell}
\usepackage{multirow}

\usepackage{ulem} % package for underlining

\usepackage{graphicx} % inserting images

% https://es.overleaf.com/learn/latex/Pgfplots_package
\usepackage{pgfplots}
\pgfplotsset{compat=1.9}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%             general page settings               %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[left=2.5cm,top=2cm,right=1.5cm,bottom=2cm]{geometry}
\usepackage{indentfirst}        % indentation for first paragraph
\setlength\parindent{1.5cm}     % paragraph indentation
% \linespread{1.3}                % 1.5 interval
\frenchspacing                  % pretty space length
\sloppy                         % pretty line breaking

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%            numbering on top of page             %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[R]{\thepage}
\fancyheadoffset{0mm}
\fancyfootoffset{0mm}
\setlength{\headheight}{17pt}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
% overriting plain style of chapter first page (plain -> numbered)
\fancypagestyle{plain}{
    \fancyhf{}
    \rhead{\thepage}}

\setcounter{page}{2} % numbering begin from second page

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%                   TOC styling                   %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{titletoc}

\contentsmargin{0cm}                         % removes the default margin

% chapter text styling
\titlecontents{chapter}[1.25cm]              % indentation
{\addvspace{10pt}\large\normalfont\bfseries} % spacing and font options for chapters
{}                                           % chapter number
{}
{\normalsize\normalfont\bfseries\;\titlerule*[.5pc]{.}\;\thecontentspage} % page number

% section text styling
\titlecontents{section}[2.75cm]              % indentation
{\addvspace{10pt}\normalsize\normalfont}     % spacing and font options for sections
{\contentslabel[\thecontentslabel]{1.25cm}}  % section number
{}
{\normalfont\;\titlerule*[.5pc]{.}\;\thecontentspage} % page number
[]

% subsection text styling
\titlecontents{subsection}[3.5cm]            % indentation
{\addvspace{10pt}\normalsize\normalfont}     % spacing and font options for subsections
{\contentslabel[\thecontentslabel]{1.25cm}}  % subsection number
{}
{\normalfont\;\titlerule*[.5pc]{.}\;\thecontentspage} % page number
[]

\setcounter{tocdepth}{2}                     % depth of TOC tree
\addto\captionsrussian{\def\contentsname{Содержание}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%                 titles styling                  %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[compact]{titlesec}

% chapter title styling
% vertical space after numbered title
\titlespacing*{\chapter}{0pt}{-50pt}{30pt}
% vertical space after unnumbered title
\titlespacing*{name=\chapter, numberless}{0pt}{-30pt}{30pt}
\titleformat{\chapter}[display]
{}{}{0pt}
{
	\Large\filcenter\sc\bfseries
}[{
	\vspace{3pt}
	\titlerule[1.5pt]
}]

% section title styling
\titlespacing*{\section}{0pt}{*1}{*4}
\titleformat{\section}[display]
{
	\centering\sc\bfseries
}{}{0pt}{\thesection.\;}

% subsection title styling
\titlespacing*{\subsection}{0pt}{*1}{*4}
\titleformat{\subsection}[display]
{
	\centering\sc\bfseries
}{}{0pt}{\thesubsection.\;}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%                  theorem style                  %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newtheoremstyle{TheoremStyle}
{}                % space above
{}                % space below
{%\slshape
}                 % theorem body font % (default is "\upshape")
{}                % indent amount
{\sc}             % theorem head font % (default is \mdseries)
{.}               % punctuation after theorem head % default: no punctuation
{ }               % space after theorem head
{}                % theorem head spec
\theoremstyle{TheoremStyle}

\newtheorem{proposition}{Предложение}
\newtheorem{definition}{Определение}
\newtheorem{theorem}{Теорема}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%             pic and table captions              %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[tableposition=top]{caption}
\usepackage{subcaption} % for more detailed captions
% \DeclareCaptionLabelFormat: #1 — standart lable text, #2  - number of pic/table
\DeclareCaptionLabelFormat{gostfigure}{Рисунок #2}
\DeclareCaptionLabelFormat{gosttable}{Таблица #2}
\DeclareCaptionLabelSeparator{gost}{~---~}
\captionsetup{labelsep=gost}
\captionsetup[figure]{labelformat=gostfigure}
\captionsetup[table]{labelformat=gosttable}
% cyrillic representation of subfigure captions: (а), (б), ...
\renewcommand{\thesubfigure}{\asbuk{subfigure}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%           itemize и enumerate styling           %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{enumitem}
\makeatletter
    \AddEnumerateCounter{\asbuk}{\@asbuk}{м)}
\makeatother
\setlist{nolistsep}
\renewcommand{\labelitemi}{-}
\renewcommand{\labelenumi}{\asbuk{enumi})}
\renewcommand{\labelenumii}{\arabic{enumii})}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%                      bibtex                     %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% bibtex [1] -> 1
\newcounter{MyBibCount}
\makeatletter
    \renewcommand{\@biblabel}[1]{\theMyBibCount.\stepcounter{MyBibCount}}
\makeatother

%\setlength{\biblabelsep}{0.3em} % control white space bibliography with bibtex
\addto\captionsrussian{\def\bibname{Список использованных источников}}

% \renewcommand\contentsname{Reference}
% \renewcommand\bibname{Reference}
% \renewcommand{\bibsection}{\subsection*{Reference, typeset as un-numbered subsection.}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                 %
%            counters for first page              %
%                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{lastpage} % pages counter

% pics and tables counter
\newcounter{totfigures}
\newcounter{tottables}
\makeatletter
    \AtEndDocument{%
      \addtocounter{totfigures}{\value{figure}}%
      \addtocounter{tottables}{\value{table}}%
      \immediate\write\@mainaux{%
        \string\gdef\string\totfig{\number\value{totfigures}}%
        \string\gdef\string\tottab{\number\value{tottables}}%
      }%
    }
\makeatother

% пока не знаю как добавить счетчик по источникам
